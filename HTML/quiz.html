<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pregunta del Día</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
<style>
body { font-family: 'Work Sans', sans-serif; background-color:#f8f8f5; display:flex; align-items:center; justify-content:center; min-height:100vh; }
.temporizador { width:3rem; height:3rem; border-radius:50%; border:4px solid #f9f506; display:flex; align-items:center; justify-content:center; font-weight:bold; color:#181811; transition: all 0.2s ease; }
.temporizador.alerta { border-color:#ff0000; color:#ff0000; animation:parpadeo 0.5s infinite; }
@keyframes parpadeo {0%,100%{opacity:1;}50%{opacity:0.5;}}
.opcion-btn { cursor:pointer; transition: all 0.2s; }
.opcion-btn:hover { transform:scale(1.02); }
</style>

<script>
/* --- Preguntas incluidas directamente --- */
const preguntas = [
  { pregunta: "¿Cuál es la edad mínima para ser miembro de mesa en Perú?", opciones: ["18 años", "20 años", "25 años", "30 años"], correcta: 0 },
  { pregunta: "¿Qué documento es obligatorio para votar en Perú?", opciones: ["DNI", "Pasaporte", "Licencia de conducir", "Carné universitario"], correcta: 0 },
  { pregunta: "¿Qué institución organiza las elecciones en Perú?", opciones: ["ONPE", "RENIEC", "JNE", "Ministerio del Interior"], correcta: 0 },
  { pregunta: "Si eres miembro de mesa, ¿qué debes hacer antes de la jornada electoral?", opciones: ["Recibir capacitación de la ONPE", "Ir a la municipalidad", "Votar por adelantado", "Ninguna acción"], correcta: 0 },
  { pregunta: "¿Cuál es la función principal de un miembro de mesa?", opciones: ["Organizar y supervisar la votación en su mesa", "Votar por sus vecinos", "Llevar los votos a su casa", "Hacer propaganda política"], correcta: 0 },
  { pregunta: "¿Qué sucede si un miembro de mesa no asiste el día de las elecciones sin justificación?", opciones: ["Puede ser multado", "Nada, solo pierde el día", "Recibe un premio", "Sigue siendo miembro de mesa"], correcta: 0 },
  { pregunta: "¿Cuántos miembros de mesa se necesitan por mesa electoral?", opciones: ["3", "5", "7", "10"], correcta: 0 },
  { pregunta: "¿Qué derecho tiene un ciudadano en el día de las elecciones?", opciones: ["Votar de manera secreta y libre", "Ser candidato automáticamente", "Obligar a otros a votar", "Cobrar por votar"], correcta: 0 },
  { pregunta: "¿Qué significa sufragio universal?", opciones: ["Todos los ciudadanos mayores de 18 años pueden votar", "Solo los adultos con trabajo pueden votar", "Solo hombres mayores de 21 años", "Solo personas con DNI emitido en Lima"], correcta: 0 },
  { pregunta: "¿Qué documento deben entregar los miembros de mesa al finalizar la jornada?", opciones: ["Acta de escrutinio", "Boleta electoral", "DNI de los votantes", "Formulario de inscripción"], correcta: 0 }
];

/* --- Lógica del quiz --- */
document.addEventListener("DOMContentLoaded", () => {

  // Intentar cargar pregunta del día desde localStorage
  let data = JSON.parse(localStorage.getItem("preguntaDelDia"));
  
  // Si no hay data, tomar primera pregunta por defecto
  if (!data) {
    data = { indice: 0 };
    localStorage.setItem("preguntaDelDia", JSON.stringify(data));
  }

  const pregunta = preguntas[data.indice];
  document.getElementById("pregunta").textContent = pregunta.pregunta;

  const botones = document.querySelectorAll(".opcion-btn");
  const feedback = document.getElementById("feedback");

  let tiempo = 15;
  const temporizadorElem = document.getElementById("temporizador");
  temporizadorElem.textContent = tiempo;

  const intervalo = setInterval(() => {
    tiempo--;
    temporizadorElem.textContent = tiempo;
    if (tiempo <= 5) temporizadorElem.classList.add("alerta");
    if (tiempo <= 0) {
      clearInterval(intervalo);
      feedback.textContent = "Tiempo agotado";
      feedback.classList.remove("hidden");
      feedback.classList.add("text-red-600");
      botones.forEach(b => b.disabled = true);
      setTimeout(() => window.location.href="infoquizz.html", 1500);
    }
  }, 1000);

  botones.forEach((btn, i) => {
    btn.textContent = pregunta.opciones[i];
    btn.disabled = false;
    btn.addEventListener("click", () => {
      clearInterval(intervalo);
      const correcto = i === pregunta.correcta;
      btn.classList.add(correcto ? "bg-green-200" : "bg-red-200");
      botones.forEach(b => b.disabled = true);
      feedback.textContent = correcto ? "¡Correcto!" : "Incorrecto.";
      feedback.classList.remove("hidden");
      feedback.classList.add(correcto ? "text-green-600" : "text-red-600");
      setTimeout(() => window.location.href="infoquizz.html", 1500);
    });
  });

});
</script>
</head>

<body>
<div class="bg-white rounded-xl shadow-lg w-full max-w-md p-6">
  <h2 class="text-xl font-bold mb-4">Pregunta del Día</h2>
  <div class="flex justify-between items-center mb-4">
    <p id="pregunta" class="text-lg font-medium">Cargando pregunta...</p>
    <div id="temporizador" class="temporizador">15</div>
  </div>
  <div class="flex flex-col gap-3">
    <button class="opcion-btn bg-white border border-gray-300 rounded-lg h-14 px-4 text-left"></button>
    <button class="opcion-btn bg-white border border-gray-300 rounded-lg h-14 px-4 text-left"></button>
    <button class="opcion-btn bg-white border border-gray-300 rounded-lg h-14 px-4 text-left"></button>
    <button class="opcion-btn bg-white border border-gray-300 rounded-lg h-14 px-4 text-left"></button>
  </div>
  <div id="feedback" class="mt-4 hidden p-3 rounded-lg"></div>
</div>
</body>
</html>
